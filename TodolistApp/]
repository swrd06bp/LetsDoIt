import React, { useState } from 'react'
import { View, TextInput, Text, TouchableOpacity } from 'react-native'

import Api from '../../Api.js'


function AddTask (props) {
  const [taskInput, setTaskInput] = useState('')

  const onSubmit = async (e) => {
    const api = new Api() 
    if (taskInput) {
      await api.insertTask({
        content: taskInput,
        list: 'Work',
        dueDate: new Date().toJSON(),
        note: null,
      })
    }
    setTaskInput('')
    props.onUpdate()
  }


  return (
    <View style={{flexDirection: 'row', justifyContent: 'center', alignItems: 'center'}}>
      <TextInput 
        type="text"
        name="task"
        placeholder="Task"
        value={taskInput}
        style={{width: '80%', borderWidth: 1, borderColor: 'lightgrey'}}
        onChange={(event) => setTaskInput(event.target.value)}
      />
      <TouchableOpacity onClick={onSubmit}>
        <Text>Add</Text>
      </TouchableOpacity>
    </View>
  )
}

export default AddTask

